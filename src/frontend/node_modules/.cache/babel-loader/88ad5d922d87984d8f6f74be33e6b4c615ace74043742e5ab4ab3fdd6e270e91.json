{"ast":null,"code":"import React from'react';import{useEditor}from'../../hooks/useEditor';import FieldEditor from'./FieldEditor';import{ChevronLeft,ChevronRight,Plus,Settings}from'lucide-react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Sidebar=_ref=>{let{collapsed,onToggleCollapse}=_ref;const{state,addField,setSelectedField,clearSelection}=useEditor();const fieldTypes=[{key:'header',label:'Header Fields',max:2},{key:'primary',label:'Primary Fields',max:2},{key:'secondary',label:'Secondary Fields',max:4},{key:'auxiliary',label:'Auxiliary Fields',max:4},{key:'back',label:'Back Fields',max:-1}];const canAddField=(fieldType,currentCount,max)=>{return max===-1||currentCount<max;};const handleAddField=fieldType=>{const newField={key:\"\".concat(fieldType,\"_\").concat(Date.now()),label:'New Field',value:'{{placeholder}}',textAlignment:'PKTextAlignmentLeft'};addField(fieldType,newField);};if(collapsed){return/*#__PURE__*/_jsxs(\"div\",{className:\"h-full flex flex-col items-center py-4 space-y-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onToggleCollapse,className:\"p-2 hover:bg-gray-100 rounded-md\",title:\"Expand sidebar\",children:/*#__PURE__*/_jsx(ChevronRight,{className:\"w-5 h-5\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-blue-100 rounded-md flex items-center justify-center\",children:/*#__PURE__*/_jsx(Settings,{className:\"w-4 h-4 text-blue-600\"})})]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"h-full flex flex-col\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-b border-gray-200 flex items-center justify-between\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold text-gray-800\",children:\"Fields\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onToggleCollapse,className:\"p-1 hover:bg-gray-100 rounded-md\",title:\"Collapse sidebar\",children:/*#__PURE__*/_jsx(ChevronLeft,{className:\"w-4 h-4\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-1 overflow-y-auto\",children:fieldTypes.map(fieldType=>{const fields=state.currentTemplate.fields[fieldType.key]||[];const canAdd=canAddField(fieldType.key,fields.length,fieldType.max);return/*#__PURE__*/_jsxs(\"div\",{className:\"border-b border-gray-100\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 bg-gray-50 flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-medium text-gray-700\",children:fieldType.label}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[fields.length,\" \",fieldType.max===-1?'':\"of \".concat(fieldType.max)]})]}),canAdd&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAddField(fieldType.key),className:\"p-1 hover:bg-gray-200 rounded-md\",title:\"Add \".concat(fieldType.label),children:/*#__PURE__*/_jsx(Plus,{className:\"w-4 h-4 text-gray-600\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-1\",children:[fields.map((field,index)=>/*#__PURE__*/_jsx(FieldEditor,{fieldType:fieldType.key,fieldIndex:index,field:field,isSelected:state.selectedFieldType===fieldType.key&&state.selectedFieldIndex===index,onSelect:()=>setSelectedField(fieldType.key,index),onDeselect:clearSelection},field.key)),fields.length===0&&/*#__PURE__*/_jsxs(\"div\",{className:\"p-3 text-center text-gray-500 text-sm\",children:[\"No \",fieldType.label.toLowerCase(),canAdd&&/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleAddField(fieldType.key),className:\"ml-2 text-blue-600 hover:text-blue-800\",children:\"Add one\"})]})]})]},fieldType.key);})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border-t border-gray-200 bg-gray-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-xs text-gray-500\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Apple PassKit compliant\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Real-time preview enabled\"})]})})]});};export default Sidebar;","map":{"version":3,"names":["React","useEditor","FieldEditor","ChevronLeft","ChevronRight","Plus","Settings","jsx","_jsx","jsxs","_jsxs","Sidebar","_ref","collapsed","onToggleCollapse","state","addField","setSelectedField","clearSelection","fieldTypes","key","label","max","canAddField","fieldType","currentCount","handleAddField","newField","concat","Date","now","value","textAlignment","className","children","onClick","title","map","fields","currentTemplate","canAdd","length","field","index","fieldIndex","isSelected","selectedFieldType","selectedFieldIndex","onSelect","onDeselect","toLowerCase"],"sources":["/Users/shawnlee/Documents/GitHub/passes-mktr/src/frontend/src/components/editor/Sidebar.tsx"],"sourcesContent":["import React from 'react';\nimport { useEditor } from '../../hooks/useEditor';\nimport FieldEditor from './FieldEditor';\nimport { ChevronLeft, ChevronRight, Plus, Settings } from 'lucide-react';\n\ninterface SidebarProps {\n  collapsed: boolean;\n  onToggleCollapse: () => void;\n}\n\nconst Sidebar: React.FC<SidebarProps> = ({ collapsed, onToggleCollapse }) => {\n  const { state, addField, setSelectedField, clearSelection } = useEditor();\n\n  const fieldTypes = [\n    { key: 'header', label: 'Header Fields', max: 2 },\n    { key: 'primary', label: 'Primary Fields', max: 2 },\n    { key: 'secondary', label: 'Secondary Fields', max: 4 },\n    { key: 'auxiliary', label: 'Auxiliary Fields', max: 4 },\n    { key: 'back', label: 'Back Fields', max: -1 }\n  ] as const;\n\n  const canAddField = (fieldType: string, currentCount: number, max: number) => {\n    return max === -1 || currentCount < max;\n  };\n\n  const handleAddField = (fieldType: string) => {\n    const newField = {\n      key: `${fieldType}_${Date.now()}`,\n      label: 'New Field',\n      value: '{{placeholder}}',\n      textAlignment: 'PKTextAlignmentLeft' as const\n    };\n    \n    addField(fieldType as any, newField);\n  };\n\n  if (collapsed) {\n    return (\n      <div className=\"h-full flex flex-col items-center py-4 space-y-4\">\n        <button\n          onClick={onToggleCollapse}\n          className=\"p-2 hover:bg-gray-100 rounded-md\"\n          title=\"Expand sidebar\"\n        >\n          <ChevronRight className=\"w-5 h-5\" />\n        </button>\n        \n        <div className=\"w-8 h-8 bg-blue-100 rounded-md flex items-center justify-center\">\n          <Settings className=\"w-4 h-4 text-blue-600\" />\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"h-full flex flex-col\">\n      {/* Header */}\n      <div className=\"p-4 border-b border-gray-200 flex items-center justify-between\">\n        <h2 className=\"text-lg font-semibold text-gray-800\">Fields</h2>\n        <button\n          onClick={onToggleCollapse}\n          className=\"p-1 hover:bg-gray-100 rounded-md\"\n          title=\"Collapse sidebar\"\n        >\n          <ChevronLeft className=\"w-4 h-4\" />\n        </button>\n      </div>\n\n      {/* Field Types */}\n      <div className=\"flex-1 overflow-y-auto\">\n        {fieldTypes.map((fieldType) => {\n          const fields = state.currentTemplate.fields[fieldType.key] || [];\n          const canAdd = canAddField(fieldType.key, fields.length, fieldType.max);\n          \n          return (\n            <div key={fieldType.key} className=\"border-b border-gray-100\">\n              {/* Field Type Header */}\n              <div className=\"p-3 bg-gray-50 flex items-center justify-between\">\n                <div>\n                  <h3 className=\"font-medium text-gray-700\">{fieldType.label}</h3>\n                  <p className=\"text-xs text-gray-500\">\n                    {fields.length} {fieldType.max === -1 ? '' : `of ${fieldType.max}`}\n                  </p>\n                </div>\n                {canAdd && (\n                  <button\n                    onClick={() => handleAddField(fieldType.key)}\n                    className=\"p-1 hover:bg-gray-200 rounded-md\"\n                    title={`Add ${fieldType.label}`}\n                  >\n                    <Plus className=\"w-4 h-4 text-gray-600\" />\n                  </button>\n                )}\n              </div>\n\n              {/* Fields */}\n              <div className=\"space-y-1\">\n                {fields.map((field, index) => (\n                  <FieldEditor\n                    key={field.key}\n                    fieldType={fieldType.key}\n                    fieldIndex={index}\n                    field={field}\n                    isSelected={\n                      state.selectedFieldType === fieldType.key &&\n                      state.selectedFieldIndex === index\n                    }\n                    onSelect={() => setSelectedField(fieldType.key, index)}\n                    onDeselect={clearSelection}\n                  />\n                ))}\n                \n                {fields.length === 0 && (\n                  <div className=\"p-3 text-center text-gray-500 text-sm\">\n                    No {fieldType.label.toLowerCase()}\n                    {canAdd && (\n                      <button\n                        onClick={() => handleAddField(fieldType.key)}\n                        className=\"ml-2 text-blue-600 hover:text-blue-800\"\n                      >\n                        Add one\n                      </button>\n                    )}\n                  </div>\n                )}\n              </div>\n            </div>\n          );\n        })}\n      </div>\n\n      {/* Footer */}\n      <div className=\"p-4 border-t border-gray-200 bg-gray-50\">\n        <div className=\"text-xs text-gray-500\">\n          <p>Apple PassKit compliant</p>\n          <p>Real-time preview enabled</p>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Sidebar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}