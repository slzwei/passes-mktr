{"ast":null,"code":"var _jsxFileName = \"/Users/shawnlee/Documents/GitHub/passes-mktr/src/frontend/src/components/PassPreview.tsx\";\nimport React from 'react';\nimport { OptimizedLayoutCalculator } from '../services/layoutCalculator';\nimport { OptimizedDimensionCalculator } from '../services/dimensionCalculator';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PassPreview = ({\n  design\n}) => {\n  // Determine logo dimensions based on format property\n  const getLogoDimensions = () => {\n    // Use the format from design properties if available\n    const format = design.logoFormat || 'square';\n    return format === 'wide' ? {\n      width: 160,\n      height: 50,\n      format: 'wide'\n    } : {\n      width: 50,\n      height: 50,\n      format: 'square'\n    };\n  };\n  const logoDimensions = getLogoDimensions();\n\n  // Apple Wallet Store Card specifications (in points)\n  const APPLE_SPECS = {\n    // Store card dimensions (exact Apple specifications)\n    cardWidth: design.cardWidth,\n    // Apple Wallet store card width\n    cardHeight: design.cardHeight,\n    // Apple Wallet store card height\n\n    // Header section\n    headerHeight: design.headerHeight,\n    // Header section height\n    logoWidth: logoDimensions.width,\n    // Dynamic logo width\n    logoHeight: logoDimensions.height,\n    // Dynamic logo height\n    logoFormat: logoDimensions.format,\n    // Logo format (square/wide)\n    logoTextMaxWidth: 160,\n    // Logo text max width (exact Apple spec)\n\n    // Strip section (Primary fields area) - exact Apple specifications\n    stripWidth: design.cardWidth,\n    // Strip width (375pt) - exact Apple spec\n    stripHeight: design.stripHeight,\n    // Strip height (144pt for store card) - exact Apple spec\n\n    // Secondary fields section\n    secondaryHeight: design.secondaryHeight,\n    // Secondary fields section height\n\n    // Barcode section\n    barcodeHeight: design.barcodeHeight,\n    // Barcode section height\n\n    // Spacing (Apple standard)\n    padding: 16,\n    // Standard padding\n    fieldSpacing: 8,\n    // Spacing between fields\n    headerPadding: 20 // Header specific padding\n  };\n  const renderHeaderSection = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center justify-between\",\n    style: {\n      height: `${APPLE_SPECS.headerHeight}px`,\n      padding: `${APPLE_SPECS.headerPadding}px`,\n      backgroundColor: design.backgroundColor\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-shrink-0\",\n        style: {\n          width: `${APPLE_SPECS.logoWidth}px`,\n          height: `${APPLE_SPECS.logoHeight}px`,\n          backgroundColor: 'transparent'\n        },\n        children: design.logoImage ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: design.logoImage,\n          alt: \"Logo\",\n          style: {\n            width: '100%',\n            height: '100%',\n            maxWidth: `${APPLE_SPECS.logoWidth}px`,\n            maxHeight: `${APPLE_SPECS.logoHeight}px`,\n            objectFit: 'contain',\n            backgroundColor: 'transparent',\n            imageRendering: 'auto'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full h-full bg-gray-100 flex items-center justify-center rounded-lg\",\n          style: {\n            width: `${APPLE_SPECS.logoWidth}px`,\n            height: `${APPLE_SPECS.logoHeight}px`\n          },\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-600 text-sm font-medium\",\n            children: \"LOGO\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this), APPLE_SPECS.logoFormat === 'square' && !design.hideLogoText && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-left px-3\",\n        style: {\n          maxWidth: `${APPLE_SPECS.logoTextMaxWidth}px`\n        },\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"font-bold leading-tight\",\n          style: {\n            color: design.foregroundColor,\n            fontSize: '12px'\n          },\n          children: design.logoText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-shrink-0 text-right\",\n      style: {\n        color: design.foregroundColor\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs opacity-75 mb-1\",\n          style: {\n            color: design.labelColor\n          },\n          children: design.cardType === 'redemption' ? 'EXPIRY' : 'POINTS'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-medium text-right\",\n          style: {\n            fontSize: '12px'\n          },\n          children: design.cardType === 'redemption' ? design.hasExpiryDate && design.expirationDate ? new Date(design.expirationDate).toLocaleDateString('en-GB', {\n            day: '2-digit',\n            month: '2-digit',\n            year: 'numeric'\n          }).replace(/\\//g, '/') : 'No Expiry' : design.cardType === 'points' ? (design.pointsBalance || 0).toLocaleString() : '1836'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 54,\n    columnNumber: 5\n  }, this);\n  const renderStripSection = () => {\n    // Account for margins in available width\n    const marginSpace = 24; // 12px left + 12px right\n    const availableWidth = APPLE_SPECS.stripWidth - marginSpace;\n\n    // Unified tiered layout and dimensions (same as backend)\n    const layoutCalc = new OptimizedLayoutCalculator();\n    const dimCalc = new OptimizedDimensionCalculator(layoutCalc);\n    const dims = dimCalc.calculateDimensions(design.totalStamps, 1);\n    const rows = dims.rows;\n    const cols = dims.cols;\n    let stampSize = dims.stampDiameter;\n    const gap = dims.adjustedGap;\n\n    // Adjust stamp size if needed to fit within available width\n    const maxStampSize = (availableWidth - (cols - 1) * gap) / cols;\n    if (stampSize > maxStampSize) {\n      stampSize = maxStampSize;\n    }\n    const gridW = cols * stampSize + (cols - 1) * gap;\n    const gridH = rows * stampSize + (rows - 1) * gap;\n    const startX = Math.floor((availableWidth - gridW) / 2);\n    const safeTop = Math.round(dims.safeAreaPadding);\n    const safeH = Math.round(dims.safeAreaHeight);\n    const startY = safeTop + Math.floor((safeH - gridH) / 2);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative stamp-strip-container\",\n      style: {\n        width: `${APPLE_SPECS.stripWidth}px`,\n        height: `${APPLE_SPECS.stripHeight}px`,\n        backgroundColor: design.stripBackgroundColor\n      },\n      children: [design.stripBackgroundImage && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"absolute inset-0 w-full h-full\",\n        style: {\n          backgroundImage: `url(${design.stripBackgroundImage})`,\n          backgroundSize: 'cover',\n          backgroundPosition: 'center',\n          backgroundRepeat: 'no-repeat',\n          opacity: design.stripBackgroundOpacity || 0.8\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 182,\n        columnNumber: 11\n      }, this), design.cardType === 'redemption' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative z-10 h-full flex items-center justify-center\",\n        style: {\n          paddingTop: `${safeTop}px`,\n          paddingBottom: `${APPLE_SPECS.stripHeight - safeTop - safeH}px`,\n          marginLeft: '12px',\n          marginRight: '12px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid\",\n          style: {\n            gridTemplateColumns: `repeat(${cols}, ${stampSize}px)`,\n            gridTemplateRows: `repeat(${rows}, ${stampSize}px)`,\n            gap: `${gap}px`,\n            width: `${gridW}px`,\n            height: `${gridH}px`\n          },\n          children: Array.from({\n            length: design.totalStamps\n          }).map((_, i) => {\n            var _design$milestonePosi;\n            const isEarned = i < design.stampsEarned;\n            const isMilestone = design.cardType === 'milestone' && ((_design$milestonePosi = design.milestonePositions) === null || _design$milestonePosi === void 0 ? void 0 : _design$milestonePosi.includes(i + 1));\n            const iconSrc = (() => {\n              if (isEarned) {\n                return (design.useSameStampIcon ? design.stampIconUnredeemed || null : design.stampIconRedeemed || null) || null;\n              }\n              return design.stampIconUnredeemed || null;\n            })();\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rounded-full border-2 flex items-center justify-center overflow-hidden relative\",\n              style: {\n                width: `${stampSize}px`,\n                height: `${stampSize}px`,\n                borderColor: iconSrc ? 'transparent' : isEarned ? design.backgroundColor : `${design.backgroundColor}40`,\n                backgroundColor: iconSrc ? 'transparent' : isEarned ? design.backgroundColor : `${design.backgroundColor}15`,\n                boxShadow: isEarned ? '0 2px 4px rgba(0, 0, 0, 0.1)' : 'none',\n                borderStyle: 'solid',\n                // Special styling for milestone stamps\n                ...(isMilestone && {\n                  borderColor: '#fbbf24',\n                  // Yellow border for milestones\n                  borderWidth: '3px',\n                  boxShadow: '0 0 0 2px #f59e0b, 0 2px 8px rgba(245, 158, 11, 0.3)'\n                })\n              },\n              children: [iconSrc ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: iconSrc,\n                alt: isEarned ? 'redeemed' : 'unredeemed',\n                style: {\n                  width: `${stampSize}px`,\n                  height: `${stampSize}px`,\n                  objectFit: 'contain',\n                  opacity: isEarned ? 1 : 0.4\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 242,\n                columnNumber: 23\n              }, this) : null, isMilestone && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute -top-1 -right-1 w-4 h-4 bg-yellow-500 rounded-full flex items-center justify-center text-white text-xs font-bold\",\n                style: {\n                  fontSize: '8px'\n                },\n                children: \"\\u2605\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 23\n              }, this)]\n            }, i, true, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 7\n    }, this);\n  };\n  const renderSecondaryFields = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"px-4 py-3\",\n    style: {\n      backgroundColor: design.backgroundColor\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center h-full\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs opacity-75 mb-1\",\n          style: {\n            color: design.labelColor\n          },\n          children: (design.secondaryFields[0].label || '').toUpperCase()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 279,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm font-medium\",\n          style: {\n            color: design.foregroundColor\n          },\n          children: design.secondaryFields[0].value\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 285,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 text-right\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs opacity-75 mb-1\",\n          style: {\n            color: design.labelColor\n          },\n          children: (design.secondaryFields[1].label || '').toUpperCase()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm font-medium\",\n          style: {\n            color: design.foregroundColor\n          },\n          children: ((_design$secondaryFiel, _design$secondaryFiel3) => {\n            const label = (((_design$secondaryFiel = design.secondaryFields[1]) === null || _design$secondaryFiel === void 0 ? void 0 : _design$secondaryFiel.label) || '').toLowerCase();\n            const looksLikeRedeemed = label.includes('redeem');\n            const looksLikeNextReward = label.includes('next reward');\n            if (looksLikeRedeemed && design.cardType === 'redemption') {\n              return `${design.stampsEarned} out of ${design.totalStamps}`;\n            } else if (looksLikeNextReward && design.cardType === 'points') {\n              return `at 2,000 points`; // Fixed value since we removed the input\n            } else if (looksLikeNextReward && design.cardType === 'milestone') {\n              var _design$secondaryFiel2;\n              return ((_design$secondaryFiel2 = design.secondaryFields[1]) === null || _design$secondaryFiel2 === void 0 ? void 0 : _design$secondaryFiel2.value) || 'Free coffee at 10 stamps';\n            }\n            return (_design$secondaryFiel3 = design.secondaryFields[1]) === null || _design$secondaryFiel3 === void 0 ? void 0 : _design$secondaryFiel3.value;\n          })()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 294,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 270,\n    columnNumber: 5\n  }, this);\n  const renderAuxiliaryFields = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"px-4 py-2\",\n    style: {\n      backgroundColor: design.backgroundColor\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-end items-center\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-right\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs opacity-75 mb-1\",\n          style: {\n            color: design.labelColor\n          },\n          children: (design.auxiliaryField.label || '').toUpperCase()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm font-medium\",\n          style: {\n            color: design.foregroundColor\n          },\n          children: design.cardType === 'points' ? `Next Reward at ${(design.pointsRequired || 0).toLocaleString()} points` : design.auxiliaryField.value\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 341,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 334,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 332,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 326,\n    columnNumber: 5\n  }, this);\n  const renderBarcodeSection = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center justify-center mt-auto\",\n    style: {\n      height: `${APPLE_SPECS.barcodeHeight}px`,\n      padding: `${APPLE_SPECS.padding}px`,\n      backgroundColor: design.backgroundColor\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col items-center bg-white border-2 border-white rounded-md p-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white rounded-lg flex items-center justify-center shadow-sm\",\n        style: {\n          width: '80px',\n          height: '60px'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-black rounded grid grid-cols-8 gap-0.5\",\n          style: {\n            width: '64px',\n            height: '48px'\n          },\n          children: Array.from({\n            length: 64\n          }, (_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `${i % 2 === 0 ? 'bg-white' : 'bg-black'}`\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 382,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 11\n        }, this), design.qrAltText && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"sr-only\",\n          children: design.qrAltText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 9\n      }, this), design.qrAltText && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-1 text-[10px] text-gray-800 bg-white rounded px-1 py-0.5\",\n        children: design.qrAltText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 394,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 358,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative rounded-2xl shadow-2xl overflow-hidden flex flex-col\",\n    style: {\n      width: `${APPLE_SPECS.cardWidth}px`,\n      height: `${APPLE_SPECS.cardHeight}px`,\n      backgroundColor: design.backgroundColor\n    },\n    children: [renderHeaderSection(), renderStripSection(), renderSecondaryFields(), design.cardType === 'milestone' && renderAuxiliaryFields(), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1\",\n      style: {\n        backgroundColor: design.backgroundColor\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 424,\n      columnNumber: 7\n    }, this), renderBarcodeSection()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 403,\n    columnNumber: 5\n  }, this);\n};\n_c = PassPreview;\nexport default PassPreview;\nvar _c;\n$RefreshReg$(_c, \"PassPreview\");","map":{"version":3,"names":["React","OptimizedLayoutCalculator","OptimizedDimensionCalculator","jsxDEV","_jsxDEV","PassPreview","design","getLogoDimensions","format","logoFormat","width","height","logoDimensions","APPLE_SPECS","cardWidth","cardHeight","headerHeight","logoWidth","logoHeight","logoTextMaxWidth","stripWidth","stripHeight","secondaryHeight","barcodeHeight","padding","fieldSpacing","headerPadding","renderHeaderSection","className","style","backgroundColor","children","logoImage","src","alt","maxWidth","maxHeight","objectFit","imageRendering","fileName","_jsxFileName","lineNumber","columnNumber","hideLogoText","color","foregroundColor","fontSize","logoText","labelColor","cardType","hasExpiryDate","expirationDate","Date","toLocaleDateString","day","month","year","replace","pointsBalance","toLocaleString","renderStripSection","marginSpace","availableWidth","layoutCalc","dimCalc","dims","calculateDimensions","totalStamps","rows","cols","stampSize","stampDiameter","gap","adjustedGap","maxStampSize","gridW","gridH","startX","Math","floor","safeTop","round","safeAreaPadding","safeH","safeAreaHeight","startY","stripBackgroundColor","stripBackgroundImage","backgroundImage","backgroundSize","backgroundPosition","backgroundRepeat","opacity","stripBackgroundOpacity","paddingTop","paddingBottom","marginLeft","marginRight","gridTemplateColumns","gridTemplateRows","Array","from","length","map","_","i","_design$milestonePosi","isEarned","stampsEarned","isMilestone","milestonePositions","includes","iconSrc","useSameStampIcon","stampIconUnredeemed","stampIconRedeemed","borderColor","boxShadow","borderStyle","borderWidth","renderSecondaryFields","secondaryFields","label","toUpperCase","value","_design$secondaryFiel","_design$secondaryFiel3","toLowerCase","looksLikeRedeemed","looksLikeNextReward","_design$secondaryFiel2","renderAuxiliaryFields","auxiliaryField","pointsRequired","renderBarcodeSection","qrAltText","_c","$RefreshReg$"],"sources":["/Users/shawnlee/Documents/GitHub/passes-mktr/src/frontend/src/components/PassPreview.tsx"],"sourcesContent":["import React from 'react';\nimport { PassDesign } from '../types';\nimport { OptimizedLayoutCalculator } from '../services/layoutCalculator';\nimport { OptimizedDimensionCalculator } from '../services/dimensionCalculator';\n\ninterface PassPreviewProps {\n  design: PassDesign;\n}\n\nconst PassPreview: React.FC<PassPreviewProps> = ({ design }) => {\n  // Determine logo dimensions based on format property\n  const getLogoDimensions = () => {\n    // Use the format from design properties if available\n    const format = design.logoFormat || 'square';\n    \n    return format === 'wide' \n      ? { width: 160, height: 50, format: 'wide' }\n      : { width: 50, height: 50, format: 'square' };\n  };\n\n  const logoDimensions = getLogoDimensions();\n\n  // Apple Wallet Store Card specifications (in points)\n  const APPLE_SPECS = {\n    // Store card dimensions (exact Apple specifications)\n    cardWidth: design.cardWidth, // Apple Wallet store card width\n    cardHeight: design.cardHeight, // Apple Wallet store card height\n    \n    // Header section\n    headerHeight: design.headerHeight, // Header section height\n    logoWidth: logoDimensions.width, // Dynamic logo width\n    logoHeight: logoDimensions.height, // Dynamic logo height\n    logoFormat: logoDimensions.format, // Logo format (square/wide)\n    logoTextMaxWidth: 160, // Logo text max width (exact Apple spec)\n    \n    // Strip section (Primary fields area) - exact Apple specifications\n    stripWidth: design.cardWidth, // Strip width (375pt) - exact Apple spec\n    stripHeight: design.stripHeight, // Strip height (144pt for store card) - exact Apple spec\n    \n    // Secondary fields section\n    secondaryHeight: design.secondaryHeight, // Secondary fields section height\n    \n    \n    // Barcode section\n    barcodeHeight: design.barcodeHeight, // Barcode section height\n    \n    // Spacing (Apple standard)\n    padding: 16, // Standard padding\n    fieldSpacing: 8, // Spacing between fields\n    headerPadding: 20, // Header specific padding\n  };\n\n  const renderHeaderSection = () => (\n    <div \n      className=\"flex items-center justify-between\"\n      style={{ \n        height: `${APPLE_SPECS.headerHeight}px`,\n        padding: `${APPLE_SPECS.headerPadding}px`,\n        backgroundColor: design.backgroundColor\n      }}\n    >\n      {/* Logo and Logo Text Group */}\n      <div className=\"flex items-center\">\n        {/* Logo */}\n        <div \n          className=\"flex-shrink-0\"\n          style={{ \n            width: `${APPLE_SPECS.logoWidth}px`, \n            height: `${APPLE_SPECS.logoHeight}px`,\n            backgroundColor: 'transparent'\n          }}\n        >\n          {design.logoImage ? (\n            <img \n              src={design.logoImage}\n              alt=\"Logo\"\n              style={{ \n                width: '100%',\n                height: '100%',\n                maxWidth: `${APPLE_SPECS.logoWidth}px`, \n                maxHeight: `${APPLE_SPECS.logoHeight}px`,\n                objectFit: 'contain',\n                backgroundColor: 'transparent',\n                imageRendering: 'auto'\n              } as React.CSSProperties}\n            />\n          ) : (\n            <div \n              className=\"w-full h-full bg-gray-100 flex items-center justify-center rounded-lg\"\n              style={{ width: `${APPLE_SPECS.logoWidth}px`, height: `${APPLE_SPECS.logoHeight}px` }}\n            >\n              <span className=\"text-gray-600 text-sm font-medium\">LOGO</span>\n            </div>\n          )}\n        </div>\n\n        {/* Logo Text - Hidden when using wide logo format */}\n        {APPLE_SPECS.logoFormat === 'square' && !design.hideLogoText && (\n          <div \n            className=\"text-left px-3\"\n            style={{ maxWidth: `${APPLE_SPECS.logoTextMaxWidth}px` }}\n          >\n            <h1 \n              className=\"font-bold leading-tight\"\n              style={{ color: design.foregroundColor, fontSize: '12px' }}\n            >\n              {design.logoText}\n            </h1>\n          </div>\n        )}\n      </div>\n\n      {/* Header Fields */}\n      <div \n        className=\"flex-shrink-0 text-right\"\n        style={{ color: design.foregroundColor }}\n      >\n        <div>\n          <div className=\"text-xs opacity-75 mb-1\" style={{ color: design.labelColor }}>\n            {design.cardType === 'redemption' ? 'EXPIRY' : 'POINTS'}\n          </div>\n          <div className=\"font-medium text-right\" style={{ fontSize: '12px' }}>\n            {design.cardType === 'redemption' ? (\n              design.hasExpiryDate && design.expirationDate ? (\n                new Date(design.expirationDate).toLocaleDateString('en-GB', {\n                  day: '2-digit',\n                  month: '2-digit',\n                  year: 'numeric'\n                }).replace(/\\//g, '/')\n              ) : (\n                'No Expiry'\n              )\n            ) : design.cardType === 'points' ? (\n              (design.pointsBalance || 0).toLocaleString()\n            ) : (\n              '1836'\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderStripSection = () => {\n    // Account for margins in available width\n    const marginSpace = 24; // 12px left + 12px right\n    const availableWidth = APPLE_SPECS.stripWidth - marginSpace;\n    \n    // Unified tiered layout and dimensions (same as backend)\n    const layoutCalc = new OptimizedLayoutCalculator();\n    const dimCalc = new OptimizedDimensionCalculator(layoutCalc);\n    const dims = dimCalc.calculateDimensions(design.totalStamps, 1);\n    const rows = dims.rows;\n    const cols = dims.cols;\n    let stampSize = dims.stampDiameter;\n    const gap = dims.adjustedGap;\n    \n    // Adjust stamp size if needed to fit within available width\n    const maxStampSize = (availableWidth - (cols - 1) * gap) / cols;\n    if (stampSize > maxStampSize) {\n      stampSize = maxStampSize;\n    }\n    \n    const gridW = (cols * stampSize) + ((cols - 1) * gap);\n    const gridH = (rows * stampSize) + ((rows - 1) * gap);\n    const startX = Math.floor((availableWidth - gridW) / 2);\n    const safeTop = Math.round(dims.safeAreaPadding);\n    const safeH = Math.round(dims.safeAreaHeight);\n    const startY = safeTop + Math.floor((safeH - gridH) / 2);\n\n    return (\n      <div \n        className=\"relative stamp-strip-container\"\n        style={{ \n          width: `${APPLE_SPECS.stripWidth}px`,\n          height: `${APPLE_SPECS.stripHeight}px`,\n          backgroundColor: design.stripBackgroundColor\n        }}\n      >\n        {/* Background Image Layer with Opacity */}\n        {design.stripBackgroundImage && (\n          <div \n            className=\"absolute inset-0 w-full h-full\"\n            style={{\n              backgroundImage: `url(${design.stripBackgroundImage})`,\n              backgroundSize: 'cover',\n              backgroundPosition: 'center',\n              backgroundRepeat: 'no-repeat',\n              opacity: design.stripBackgroundOpacity || 0.8\n            }}\n          />\n        )}\n        \n        {/* Primary Fields - Stamps Grid (only for redemption cards) */}\n        {design.cardType === 'redemption' && (\n          <div className=\"relative z-10 h-full flex items-center justify-center\" style={{ \n            paddingTop: `${safeTop}px`, \n            paddingBottom: `${APPLE_SPECS.stripHeight - safeTop - safeH}px`,\n            marginLeft: '12px',\n            marginRight: '12px'\n          }}>\n            <div \n              className=\"grid\"\n              style={{\n                gridTemplateColumns: `repeat(${cols}, ${stampSize}px)`,\n                gridTemplateRows: `repeat(${rows}, ${stampSize}px)`,\n                gap: `${gap}px`,\n                width: `${gridW}px`,\n                height: `${gridH}px`\n              }}\n            >\n              {Array.from({ length: design.totalStamps }).map((_, i) => {\n                const isEarned = i < design.stampsEarned;\n                const isMilestone = design.cardType === 'milestone' && design.milestonePositions?.includes(i + 1);\n                const iconSrc = (() => {\n                  if (isEarned) {\n                    return (design.useSameStampIcon ? (design.stampIconUnredeemed || null) : (design.stampIconRedeemed || null)) || null;\n                  }\n                  return design.stampIconUnredeemed || null;\n                })();\n                \n                return (\n                  <div\n                    key={i}\n                    className=\"rounded-full border-2 flex items-center justify-center overflow-hidden relative\"\n                    style={{\n                      width: `${stampSize}px`,\n                      height: `${stampSize}px`,\n                      borderColor: iconSrc ? 'transparent' : (isEarned ? design.backgroundColor : `${design.backgroundColor}40`),\n                      backgroundColor: iconSrc ? 'transparent' : (isEarned ? design.backgroundColor : `${design.backgroundColor}15`),\n                      boxShadow: isEarned ? '0 2px 4px rgba(0, 0, 0, 0.1)' : 'none',\n                      borderStyle: 'solid',\n                      // Special styling for milestone stamps\n                      ...(isMilestone && {\n                        borderColor: '#fbbf24', // Yellow border for milestones\n                        borderWidth: '3px',\n                        boxShadow: '0 0 0 2px #f59e0b, 0 2px 8px rgba(245, 158, 11, 0.3)'\n                      })\n                    }}\n                  >\n                    {iconSrc ? (\n                      <img\n                        src={iconSrc}\n                        alt={isEarned ? 'redeemed' : 'unredeemed'}\n                        style={{ width: `${stampSize}px`, height: `${stampSize}px`, objectFit: 'contain', opacity: isEarned ? 1 : 0.4 }}\n                      />\n                    ) : null}\n                    \n                    {/* Milestone indicator */}\n                    {isMilestone && (\n                      <div \n                        className=\"absolute -top-1 -right-1 w-4 h-4 bg-yellow-500 rounded-full flex items-center justify-center text-white text-xs font-bold\"\n                        style={{ fontSize: '8px' }}\n                      >\n                        ★\n                      </div>\n                    )}\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        )}\n        \n      </div>\n    );\n  };\n\n  const renderSecondaryFields = () => (\n    <div \n      className=\"px-4 py-3\"\n      style={{ \n        backgroundColor: design.backgroundColor \n      }}\n    >\n      <div className=\"flex justify-between items-center h-full\">\n        {/* Secondary Field 1 */}\n        <div className=\"flex-1\">\n          <div \n            className=\"text-xs opacity-75 mb-1\"\n            style={{ color: design.labelColor }}\n          >\n            {(design.secondaryFields[0].label || '').toUpperCase()}\n          </div>\n          <div \n            className=\"text-sm font-medium\"\n            style={{ color: design.foregroundColor }}\n          >\n            {design.secondaryFields[0].value}\n          </div>\n        </div>\n        \n        {/* Secondary Field 2 */}\n        <div className=\"flex-1 text-right\">\n          <div \n            className=\"text-xs opacity-75 mb-1\"\n            style={{ color: design.labelColor }}\n          >\n            {(design.secondaryFields[1].label || '').toUpperCase()}\n          </div>\n          <div \n            className=\"text-sm font-medium\"\n            style={{ color: design.foregroundColor }}\n          >\n            {(() => {\n              const label = (design.secondaryFields[1]?.label || '').toLowerCase();\n              const looksLikeRedeemed = label.includes('redeem');\n              const looksLikeNextReward = label.includes('next reward');\n              \n              if (looksLikeRedeemed && design.cardType === 'redemption') {\n                return `${design.stampsEarned} out of ${design.totalStamps}`;\n              } else if (looksLikeNextReward && design.cardType === 'points') {\n                return `at 2,000 points`; // Fixed value since we removed the input\n              } else if (looksLikeNextReward && design.cardType === 'milestone') {\n                return design.secondaryFields[1]?.value || 'Free coffee at 10 stamps';\n              }\n              return design.secondaryFields[1]?.value;\n            })()}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n  const renderAuxiliaryFields = () => (\n    <div \n      className=\"px-4 py-2\"\n      style={{ \n        backgroundColor: design.backgroundColor \n      }}\n    >\n      <div className=\"flex justify-end items-center\">\n        {/* Auxiliary Field - Points like Hilton Honors */}\n        <div className=\"text-right\">\n          <div \n            className=\"text-xs opacity-75 mb-1\"\n            style={{ color: design.labelColor }}\n          >\n            {(design.auxiliaryField.label || '').toUpperCase()}\n          </div>\n          <div \n            className=\"text-sm font-medium\"\n            style={{ color: design.foregroundColor }}\n          >\n            {design.cardType === 'points' ? (\n              `Next Reward at ${(design.pointsRequired || 0).toLocaleString()} points`\n            ) : (\n              design.auxiliaryField.value\n            )}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n\n  const renderBarcodeSection = () => (\n    <div \n      className=\"flex items-center justify-center mt-auto\"\n      style={{ \n        height: `${APPLE_SPECS.barcodeHeight}px`,\n        padding: `${APPLE_SPECS.padding}px`,\n        backgroundColor: design.backgroundColor \n      }}\n    >\n      <div className=\"flex flex-col items-center bg-white border-2 border-white rounded-md p-2\">\n        <div \n          className=\"bg-white rounded-lg flex items-center justify-center shadow-sm\"\n          style={{ \n            width: '80px', \n            height: '60px'\n          }}\n        >\n          <div \n            className=\"bg-black rounded grid grid-cols-8 gap-0.5\"\n            style={{ \n              width: '64px', \n              height: '48px' \n            }}\n          >\n            {Array.from({ length: 64 }, (_, i) => (\n              <div \n                key={i} \n                className={`${i % 2 === 0 ? 'bg-white' : 'bg-black'}`}\n              />\n            ))}\n          </div>\n          {/* Alt text for accessibility */}\n          {design.qrAltText && (\n            <span className=\"sr-only\">{design.qrAltText}</span>\n          )}\n        </div>\n        {design.qrAltText && (\n          <div className=\"mt-1 text-[10px] text-gray-800 bg-white rounded px-1 py-0.5\">\n            {design.qrAltText}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n\n  return (\n    <div \n      className=\"relative rounded-2xl shadow-2xl overflow-hidden flex flex-col\"\n      style={{ \n        width: `${APPLE_SPECS.cardWidth}px`,\n        height: `${APPLE_SPECS.cardHeight}px`,\n        backgroundColor: design.backgroundColor\n      }}\n    >\n      {/* Header Section */}\n      {renderHeaderSection()}\n      \n      {/* Strip Section (Stamps) */}\n      {renderStripSection()}\n      \n      {/* Secondary Fields Section */}\n      {renderSecondaryFields()}\n      \n      {/* Auxiliary Fields Section - Only show for milestone cards */}\n      {design.cardType === 'milestone' && renderAuxiliaryFields()}\n      \n      {/* Flexible spacer to push barcode to bottom */}\n      <div \n        className=\"flex-1\" \n        style={{ backgroundColor: design.backgroundColor }}\n      ></div>\n\n      {/* Barcode Section */}\n      {renderBarcodeSection()}\n    </div>\n  );\n};\n\nexport default PassPreview;\n"],"mappings":";AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,SAASC,yBAAyB,QAAQ,8BAA8B;AACxE,SAASC,4BAA4B,QAAQ,iCAAiC;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAM/E,MAAMC,WAAuC,GAAGA,CAAC;EAAEC;AAAO,CAAC,KAAK;EAC9D;EACA,MAAMC,iBAAiB,GAAGA,CAAA,KAAM;IAC9B;IACA,MAAMC,MAAM,GAAGF,MAAM,CAACG,UAAU,IAAI,QAAQ;IAE5C,OAAOD,MAAM,KAAK,MAAM,GACpB;MAAEE,KAAK,EAAE,GAAG;MAAEC,MAAM,EAAE,EAAE;MAAEH,MAAM,EAAE;IAAO,CAAC,GAC1C;MAAEE,KAAK,EAAE,EAAE;MAAEC,MAAM,EAAE,EAAE;MAAEH,MAAM,EAAE;IAAS,CAAC;EACjD,CAAC;EAED,MAAMI,cAAc,GAAGL,iBAAiB,CAAC,CAAC;;EAE1C;EACA,MAAMM,WAAW,GAAG;IAClB;IACAC,SAAS,EAAER,MAAM,CAACQ,SAAS;IAAE;IAC7BC,UAAU,EAAET,MAAM,CAACS,UAAU;IAAE;;IAE/B;IACAC,YAAY,EAAEV,MAAM,CAACU,YAAY;IAAE;IACnCC,SAAS,EAAEL,cAAc,CAACF,KAAK;IAAE;IACjCQ,UAAU,EAAEN,cAAc,CAACD,MAAM;IAAE;IACnCF,UAAU,EAAEG,cAAc,CAACJ,MAAM;IAAE;IACnCW,gBAAgB,EAAE,GAAG;IAAE;;IAEvB;IACAC,UAAU,EAAEd,MAAM,CAACQ,SAAS;IAAE;IAC9BO,WAAW,EAAEf,MAAM,CAACe,WAAW;IAAE;;IAEjC;IACAC,eAAe,EAAEhB,MAAM,CAACgB,eAAe;IAAE;;IAGzC;IACAC,aAAa,EAAEjB,MAAM,CAACiB,aAAa;IAAE;;IAErC;IACAC,OAAO,EAAE,EAAE;IAAE;IACbC,YAAY,EAAE,CAAC;IAAE;IACjBC,aAAa,EAAE,EAAE,CAAE;EACrB,CAAC;EAED,MAAMC,mBAAmB,GAAGA,CAAA,kBAC1BvB,OAAA;IACEwB,SAAS,EAAC,mCAAmC;IAC7CC,KAAK,EAAE;MACLlB,MAAM,EAAE,GAAGE,WAAW,CAACG,YAAY,IAAI;MACvCQ,OAAO,EAAE,GAAGX,WAAW,CAACa,aAAa,IAAI;MACzCI,eAAe,EAAExB,MAAM,CAACwB;IAC1B,CAAE;IAAAC,QAAA,gBAGF3B,OAAA;MAAKwB,SAAS,EAAC,mBAAmB;MAAAG,QAAA,gBAEhC3B,OAAA;QACEwB,SAAS,EAAC,eAAe;QACzBC,KAAK,EAAE;UACLnB,KAAK,EAAE,GAAGG,WAAW,CAACI,SAAS,IAAI;UACnCN,MAAM,EAAE,GAAGE,WAAW,CAACK,UAAU,IAAI;UACrCY,eAAe,EAAE;QACnB,CAAE;QAAAC,QAAA,EAEDzB,MAAM,CAAC0B,SAAS,gBACf5B,OAAA;UACE6B,GAAG,EAAE3B,MAAM,CAAC0B,SAAU;UACtBE,GAAG,EAAC,MAAM;UACVL,KAAK,EAAE;YACLnB,KAAK,EAAE,MAAM;YACbC,MAAM,EAAE,MAAM;YACdwB,QAAQ,EAAE,GAAGtB,WAAW,CAACI,SAAS,IAAI;YACtCmB,SAAS,EAAE,GAAGvB,WAAW,CAACK,UAAU,IAAI;YACxCmB,SAAS,EAAE,SAAS;YACpBP,eAAe,EAAE,aAAa;YAC9BQ,cAAc,EAAE;UAClB;QAAyB;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC1B,CAAC,gBAEFtC,OAAA;UACEwB,SAAS,EAAC,uEAAuE;UACjFC,KAAK,EAAE;YAAEnB,KAAK,EAAE,GAAGG,WAAW,CAACI,SAAS,IAAI;YAAEN,MAAM,EAAE,GAAGE,WAAW,CAACK,UAAU;UAAK,CAAE;UAAAa,QAAA,eAEtF3B,OAAA;YAAMwB,SAAS,EAAC,mCAAmC;YAAAG,QAAA,EAAC;UAAI;YAAAQ,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC5D;MACN;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,EAGL7B,WAAW,CAACJ,UAAU,KAAK,QAAQ,IAAI,CAACH,MAAM,CAACqC,YAAY,iBAC1DvC,OAAA;QACEwB,SAAS,EAAC,gBAAgB;QAC1BC,KAAK,EAAE;UAAEM,QAAQ,EAAE,GAAGtB,WAAW,CAACM,gBAAgB;QAAK,CAAE;QAAAY,QAAA,eAEzD3B,OAAA;UACEwB,SAAS,EAAC,yBAAyB;UACnCC,KAAK,EAAE;YAAEe,KAAK,EAAEtC,MAAM,CAACuC,eAAe;YAAEC,QAAQ,EAAE;UAAO,CAAE;UAAAf,QAAA,EAE1DzB,MAAM,CAACyC;QAAQ;UAAAR,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACd;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC,eAGNtC,OAAA;MACEwB,SAAS,EAAC,0BAA0B;MACpCC,KAAK,EAAE;QAAEe,KAAK,EAAEtC,MAAM,CAACuC;MAAgB,CAAE;MAAAd,QAAA,eAEzC3B,OAAA;QAAA2B,QAAA,gBACE3B,OAAA;UAAKwB,SAAS,EAAC,yBAAyB;UAACC,KAAK,EAAE;YAAEe,KAAK,EAAEtC,MAAM,CAAC0C;UAAW,CAAE;UAAAjB,QAAA,EAC1EzB,MAAM,CAAC2C,QAAQ,KAAK,YAAY,GAAG,QAAQ,GAAG;QAAQ;UAAAV,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACpD,CAAC,eACNtC,OAAA;UAAKwB,SAAS,EAAC,wBAAwB;UAACC,KAAK,EAAE;YAAEiB,QAAQ,EAAE;UAAO,CAAE;UAAAf,QAAA,EACjEzB,MAAM,CAAC2C,QAAQ,KAAK,YAAY,GAC/B3C,MAAM,CAAC4C,aAAa,IAAI5C,MAAM,CAAC6C,cAAc,GAC3C,IAAIC,IAAI,CAAC9C,MAAM,CAAC6C,cAAc,CAAC,CAACE,kBAAkB,CAAC,OAAO,EAAE;YAC1DC,GAAG,EAAE,SAAS;YACdC,KAAK,EAAE,SAAS;YAChBC,IAAI,EAAE;UACR,CAAC,CAAC,CAACC,OAAO,CAAC,KAAK,EAAE,GAAG,CAAC,GAEtB,WACD,GACCnD,MAAM,CAAC2C,QAAQ,KAAK,QAAQ,GAC9B,CAAC3C,MAAM,CAACoD,aAAa,IAAI,CAAC,EAAEC,cAAc,CAAC,CAAC,GAE5C;QACD;UAAApB,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CACN;EAED,MAAMkB,kBAAkB,GAAGA,CAAA,KAAM;IAC/B;IACA,MAAMC,WAAW,GAAG,EAAE,CAAC,CAAC;IACxB,MAAMC,cAAc,GAAGjD,WAAW,CAACO,UAAU,GAAGyC,WAAW;;IAE3D;IACA,MAAME,UAAU,GAAG,IAAI9D,yBAAyB,CAAC,CAAC;IAClD,MAAM+D,OAAO,GAAG,IAAI9D,4BAA4B,CAAC6D,UAAU,CAAC;IAC5D,MAAME,IAAI,GAAGD,OAAO,CAACE,mBAAmB,CAAC5D,MAAM,CAAC6D,WAAW,EAAE,CAAC,CAAC;IAC/D,MAAMC,IAAI,GAAGH,IAAI,CAACG,IAAI;IACtB,MAAMC,IAAI,GAAGJ,IAAI,CAACI,IAAI;IACtB,IAAIC,SAAS,GAAGL,IAAI,CAACM,aAAa;IAClC,MAAMC,GAAG,GAAGP,IAAI,CAACQ,WAAW;;IAE5B;IACA,MAAMC,YAAY,GAAG,CAACZ,cAAc,GAAG,CAACO,IAAI,GAAG,CAAC,IAAIG,GAAG,IAAIH,IAAI;IAC/D,IAAIC,SAAS,GAAGI,YAAY,EAAE;MAC5BJ,SAAS,GAAGI,YAAY;IAC1B;IAEA,MAAMC,KAAK,GAAIN,IAAI,GAAGC,SAAS,GAAK,CAACD,IAAI,GAAG,CAAC,IAAIG,GAAI;IACrD,MAAMI,KAAK,GAAIR,IAAI,GAAGE,SAAS,GAAK,CAACF,IAAI,GAAG,CAAC,IAAII,GAAI;IACrD,MAAMK,MAAM,GAAGC,IAAI,CAACC,KAAK,CAAC,CAACjB,cAAc,GAAGa,KAAK,IAAI,CAAC,CAAC;IACvD,MAAMK,OAAO,GAAGF,IAAI,CAACG,KAAK,CAAChB,IAAI,CAACiB,eAAe,CAAC;IAChD,MAAMC,KAAK,GAAGL,IAAI,CAACG,KAAK,CAAChB,IAAI,CAACmB,cAAc,CAAC;IAC7C,MAAMC,MAAM,GAAGL,OAAO,GAAGF,IAAI,CAACC,KAAK,CAAC,CAACI,KAAK,GAAGP,KAAK,IAAI,CAAC,CAAC;IAExD,oBACExE,OAAA;MACEwB,SAAS,EAAC,gCAAgC;MAC1CC,KAAK,EAAE;QACLnB,KAAK,EAAE,GAAGG,WAAW,CAACO,UAAU,IAAI;QACpCT,MAAM,EAAE,GAAGE,WAAW,CAACQ,WAAW,IAAI;QACtCS,eAAe,EAAExB,MAAM,CAACgF;MAC1B,CAAE;MAAAvD,QAAA,GAGDzB,MAAM,CAACiF,oBAAoB,iBAC1BnF,OAAA;QACEwB,SAAS,EAAC,gCAAgC;QAC1CC,KAAK,EAAE;UACL2D,eAAe,EAAE,OAAOlF,MAAM,CAACiF,oBAAoB,GAAG;UACtDE,cAAc,EAAE,OAAO;UACvBC,kBAAkB,EAAE,QAAQ;UAC5BC,gBAAgB,EAAE,WAAW;UAC7BC,OAAO,EAAEtF,MAAM,CAACuF,sBAAsB,IAAI;QAC5C;MAAE;QAAAtD,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACF,EAGApC,MAAM,CAAC2C,QAAQ,KAAK,YAAY,iBAC/B7C,OAAA;QAAKwB,SAAS,EAAC,uDAAuD;QAACC,KAAK,EAAE;UAC5EiE,UAAU,EAAE,GAAGd,OAAO,IAAI;UAC1Be,aAAa,EAAE,GAAGlF,WAAW,CAACQ,WAAW,GAAG2D,OAAO,GAAGG,KAAK,IAAI;UAC/Da,UAAU,EAAE,MAAM;UAClBC,WAAW,EAAE;QACf,CAAE;QAAAlE,QAAA,eACA3B,OAAA;UACEwB,SAAS,EAAC,MAAM;UAChBC,KAAK,EAAE;YACLqE,mBAAmB,EAAE,UAAU7B,IAAI,KAAKC,SAAS,KAAK;YACtD6B,gBAAgB,EAAE,UAAU/B,IAAI,KAAKE,SAAS,KAAK;YACnDE,GAAG,EAAE,GAAGA,GAAG,IAAI;YACf9D,KAAK,EAAE,GAAGiE,KAAK,IAAI;YACnBhE,MAAM,EAAE,GAAGiE,KAAK;UAClB,CAAE;UAAA7C,QAAA,EAEDqE,KAAK,CAACC,IAAI,CAAC;YAAEC,MAAM,EAAEhG,MAAM,CAAC6D;UAAY,CAAC,CAAC,CAACoC,GAAG,CAAC,CAACC,CAAC,EAAEC,CAAC,KAAK;YAAA,IAAAC,qBAAA;YACxD,MAAMC,QAAQ,GAAGF,CAAC,GAAGnG,MAAM,CAACsG,YAAY;YACxC,MAAMC,WAAW,GAAGvG,MAAM,CAAC2C,QAAQ,KAAK,WAAW,MAAAyD,qBAAA,GAAIpG,MAAM,CAACwG,kBAAkB,cAAAJ,qBAAA,uBAAzBA,qBAAA,CAA2BK,QAAQ,CAACN,CAAC,GAAG,CAAC,CAAC;YACjG,MAAMO,OAAO,GAAG,CAAC,MAAM;cACrB,IAAIL,QAAQ,EAAE;gBACZ,OAAO,CAACrG,MAAM,CAAC2G,gBAAgB,GAAI3G,MAAM,CAAC4G,mBAAmB,IAAI,IAAI,GAAK5G,MAAM,CAAC6G,iBAAiB,IAAI,IAAK,KAAK,IAAI;cACtH;cACA,OAAO7G,MAAM,CAAC4G,mBAAmB,IAAI,IAAI;YAC3C,CAAC,EAAE,CAAC;YAEJ,oBACE9G,OAAA;cAEEwB,SAAS,EAAC,iFAAiF;cAC3FC,KAAK,EAAE;gBACLnB,KAAK,EAAE,GAAG4D,SAAS,IAAI;gBACvB3D,MAAM,EAAE,GAAG2D,SAAS,IAAI;gBACxB8C,WAAW,EAAEJ,OAAO,GAAG,aAAa,GAAIL,QAAQ,GAAGrG,MAAM,CAACwB,eAAe,GAAG,GAAGxB,MAAM,CAACwB,eAAe,IAAK;gBAC1GA,eAAe,EAAEkF,OAAO,GAAG,aAAa,GAAIL,QAAQ,GAAGrG,MAAM,CAACwB,eAAe,GAAG,GAAGxB,MAAM,CAACwB,eAAe,IAAK;gBAC9GuF,SAAS,EAAEV,QAAQ,GAAG,8BAA8B,GAAG,MAAM;gBAC7DW,WAAW,EAAE,OAAO;gBACpB;gBACA,IAAIT,WAAW,IAAI;kBACjBO,WAAW,EAAE,SAAS;kBAAE;kBACxBG,WAAW,EAAE,KAAK;kBAClBF,SAAS,EAAE;gBACb,CAAC;cACH,CAAE;cAAAtF,QAAA,GAEDiF,OAAO,gBACN5G,OAAA;gBACE6B,GAAG,EAAE+E,OAAQ;gBACb9E,GAAG,EAAEyE,QAAQ,GAAG,UAAU,GAAG,YAAa;gBAC1C9E,KAAK,EAAE;kBAAEnB,KAAK,EAAE,GAAG4D,SAAS,IAAI;kBAAE3D,MAAM,EAAE,GAAG2D,SAAS,IAAI;kBAAEjC,SAAS,EAAE,SAAS;kBAAEuD,OAAO,EAAEe,QAAQ,GAAG,CAAC,GAAG;gBAAI;cAAE;gBAAApE,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACjH,CAAC,GACA,IAAI,EAGPmE,WAAW,iBACVzG,OAAA;gBACEwB,SAAS,EAAC,2HAA2H;gBACrIC,KAAK,EAAE;kBAAEiB,QAAQ,EAAE;gBAAM,CAAE;gBAAAf,QAAA,EAC5B;cAED;gBAAAQ,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAK,CACN;YAAA,GAjCI+D,CAAC;cAAAlE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAkCH,CAAC;UAEV,CAAC;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAEE,CAAC;EAEV,CAAC;EAED,MAAM8E,qBAAqB,GAAGA,CAAA,kBAC5BpH,OAAA;IACEwB,SAAS,EAAC,WAAW;IACrBC,KAAK,EAAE;MACLC,eAAe,EAAExB,MAAM,CAACwB;IAC1B,CAAE;IAAAC,QAAA,eAEF3B,OAAA;MAAKwB,SAAS,EAAC,0CAA0C;MAAAG,QAAA,gBAEvD3B,OAAA;QAAKwB,SAAS,EAAC,QAAQ;QAAAG,QAAA,gBACrB3B,OAAA;UACEwB,SAAS,EAAC,yBAAyB;UACnCC,KAAK,EAAE;YAAEe,KAAK,EAAEtC,MAAM,CAAC0C;UAAW,CAAE;UAAAjB,QAAA,EAEnC,CAACzB,MAAM,CAACmH,eAAe,CAAC,CAAC,CAAC,CAACC,KAAK,IAAI,EAAE,EAAEC,WAAW,CAAC;QAAC;UAAApF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACnD,CAAC,eACNtC,OAAA;UACEwB,SAAS,EAAC,qBAAqB;UAC/BC,KAAK,EAAE;YAAEe,KAAK,EAAEtC,MAAM,CAACuC;UAAgB,CAAE;UAAAd,QAAA,EAExCzB,MAAM,CAACmH,eAAe,CAAC,CAAC,CAAC,CAACG;QAAK;UAAArF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC7B,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC,eAGNtC,OAAA;QAAKwB,SAAS,EAAC,mBAAmB;QAAAG,QAAA,gBAChC3B,OAAA;UACEwB,SAAS,EAAC,yBAAyB;UACnCC,KAAK,EAAE;YAAEe,KAAK,EAAEtC,MAAM,CAAC0C;UAAW,CAAE;UAAAjB,QAAA,EAEnC,CAACzB,MAAM,CAACmH,eAAe,CAAC,CAAC,CAAC,CAACC,KAAK,IAAI,EAAE,EAAEC,WAAW,CAAC;QAAC;UAAApF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACnD,CAAC,eACNtC,OAAA;UACEwB,SAAS,EAAC,qBAAqB;UAC/BC,KAAK,EAAE;YAAEe,KAAK,EAAEtC,MAAM,CAACuC;UAAgB,CAAE;UAAAd,QAAA,EAExC,CAAC,CAAA8F,qBAAA,EAAAC,sBAAA,KAAM;YACN,MAAMJ,KAAK,GAAG,CAAC,EAAAG,qBAAA,GAAAvH,MAAM,CAACmH,eAAe,CAAC,CAAC,CAAC,cAAAI,qBAAA,uBAAzBA,qBAAA,CAA2BH,KAAK,KAAI,EAAE,EAAEK,WAAW,CAAC,CAAC;YACpE,MAAMC,iBAAiB,GAAGN,KAAK,CAACX,QAAQ,CAAC,QAAQ,CAAC;YAClD,MAAMkB,mBAAmB,GAAGP,KAAK,CAACX,QAAQ,CAAC,aAAa,CAAC;YAEzD,IAAIiB,iBAAiB,IAAI1H,MAAM,CAAC2C,QAAQ,KAAK,YAAY,EAAE;cACzD,OAAO,GAAG3C,MAAM,CAACsG,YAAY,WAAWtG,MAAM,CAAC6D,WAAW,EAAE;YAC9D,CAAC,MAAM,IAAI8D,mBAAmB,IAAI3H,MAAM,CAAC2C,QAAQ,KAAK,QAAQ,EAAE;cAC9D,OAAO,iBAAiB,CAAC,CAAC;YAC5B,CAAC,MAAM,IAAIgF,mBAAmB,IAAI3H,MAAM,CAAC2C,QAAQ,KAAK,WAAW,EAAE;cAAA,IAAAiF,sBAAA;cACjE,OAAO,EAAAA,sBAAA,GAAA5H,MAAM,CAACmH,eAAe,CAAC,CAAC,CAAC,cAAAS,sBAAA,uBAAzBA,sBAAA,CAA2BN,KAAK,KAAI,0BAA0B;YACvE;YACA,QAAAE,sBAAA,GAAOxH,MAAM,CAACmH,eAAe,CAAC,CAAC,CAAC,cAAAK,sBAAA,uBAAzBA,sBAAA,CAA2BF,KAAK;UACzC,CAAC,EAAE;QAAC;UAAArF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACD,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CACN;EAED,MAAMyF,qBAAqB,GAAGA,CAAA,kBAC5B/H,OAAA;IACEwB,SAAS,EAAC,WAAW;IACrBC,KAAK,EAAE;MACLC,eAAe,EAAExB,MAAM,CAACwB;IAC1B,CAAE;IAAAC,QAAA,eAEF3B,OAAA;MAAKwB,SAAS,EAAC,+BAA+B;MAAAG,QAAA,eAE5C3B,OAAA;QAAKwB,SAAS,EAAC,YAAY;QAAAG,QAAA,gBACzB3B,OAAA;UACEwB,SAAS,EAAC,yBAAyB;UACnCC,KAAK,EAAE;YAAEe,KAAK,EAAEtC,MAAM,CAAC0C;UAAW,CAAE;UAAAjB,QAAA,EAEnC,CAACzB,MAAM,CAAC8H,cAAc,CAACV,KAAK,IAAI,EAAE,EAAEC,WAAW,CAAC;QAAC;UAAApF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAC/C,CAAC,eACNtC,OAAA;UACEwB,SAAS,EAAC,qBAAqB;UAC/BC,KAAK,EAAE;YAAEe,KAAK,EAAEtC,MAAM,CAACuC;UAAgB,CAAE;UAAAd,QAAA,EAExCzB,MAAM,CAAC2C,QAAQ,KAAK,QAAQ,GAC3B,kBAAkB,CAAC3C,MAAM,CAAC+H,cAAc,IAAI,CAAC,EAAE1E,cAAc,CAAC,CAAC,SAAS,GAExErD,MAAM,CAAC8H,cAAc,CAACR;QACvB;UAAArF,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACH;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACH;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CACN;EAGD,MAAM4F,oBAAoB,GAAGA,CAAA,kBAC3BlI,OAAA;IACEwB,SAAS,EAAC,0CAA0C;IACpDC,KAAK,EAAE;MACLlB,MAAM,EAAE,GAAGE,WAAW,CAACU,aAAa,IAAI;MACxCC,OAAO,EAAE,GAAGX,WAAW,CAACW,OAAO,IAAI;MACnCM,eAAe,EAAExB,MAAM,CAACwB;IAC1B,CAAE;IAAAC,QAAA,eAEF3B,OAAA;MAAKwB,SAAS,EAAC,0EAA0E;MAAAG,QAAA,gBACvF3B,OAAA;QACEwB,SAAS,EAAC,gEAAgE;QAC1EC,KAAK,EAAE;UACLnB,KAAK,EAAE,MAAM;UACbC,MAAM,EAAE;QACV,CAAE;QAAAoB,QAAA,gBAEF3B,OAAA;UACEwB,SAAS,EAAC,2CAA2C;UACrDC,KAAK,EAAE;YACLnB,KAAK,EAAE,MAAM;YACbC,MAAM,EAAE;UACV,CAAE;UAAAoB,QAAA,EAEDqE,KAAK,CAACC,IAAI,CAAC;YAAEC,MAAM,EAAE;UAAG,CAAC,EAAE,CAACE,CAAC,EAAEC,CAAC,kBAC/BrG,OAAA;YAEEwB,SAAS,EAAE,GAAG6E,CAAC,GAAG,CAAC,KAAK,CAAC,GAAG,UAAU,GAAG,UAAU;UAAG,GADjDA,CAAC;YAAAlE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAEP,CACF;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,EAELpC,MAAM,CAACiI,SAAS,iBACfnI,OAAA;UAAMwB,SAAS,EAAC,SAAS;UAAAG,QAAA,EAAEzB,MAAM,CAACiI;QAAS;UAAAhG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CACnD;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACE,CAAC,EACLpC,MAAM,CAACiI,SAAS,iBACfnI,OAAA;QAAKwB,SAAS,EAAC,6DAA6D;QAAAG,QAAA,EACzEzB,MAAM,CAACiI;MAAS;QAAAhG,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACd,CACN;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CACN;EAED,oBACEtC,OAAA;IACEwB,SAAS,EAAC,+DAA+D;IACzEC,KAAK,EAAE;MACLnB,KAAK,EAAE,GAAGG,WAAW,CAACC,SAAS,IAAI;MACnCH,MAAM,EAAE,GAAGE,WAAW,CAACE,UAAU,IAAI;MACrCe,eAAe,EAAExB,MAAM,CAACwB;IAC1B,CAAE;IAAAC,QAAA,GAGDJ,mBAAmB,CAAC,CAAC,EAGrBiC,kBAAkB,CAAC,CAAC,EAGpB4D,qBAAqB,CAAC,CAAC,EAGvBlH,MAAM,CAAC2C,QAAQ,KAAK,WAAW,IAAIkF,qBAAqB,CAAC,CAAC,eAG3D/H,OAAA;MACEwB,SAAS,EAAC,QAAQ;MAClBC,KAAK,EAAE;QAAEC,eAAe,EAAExB,MAAM,CAACwB;MAAgB;IAAE;MAAAS,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAC/C,CAAC,EAGN4F,oBAAoB,CAAC,CAAC;EAAA;IAAA/F,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACpB,CAAC;AAEV,CAAC;AAAC8F,EAAA,GAvaInI,WAAuC;AAya7C,eAAeA,WAAW;AAAC,IAAAmI,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}