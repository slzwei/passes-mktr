{"ast":null,"code":"var _jsxFileName = \"/Users/shawnlee/Documents/GitHub/passes-mktr/src/frontend/src/components/PassPreview.tsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { OptimizedLayoutCalculator } from '../services/layoutCalculator';\nimport { OptimizedDimensionCalculator } from '../services/dimensionCalculator';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PassPreview = ({\n  design\n}) => {\n  _s();\n  // State to track logo dimensions\n  const [logoDimensions, setLogoDimensions] = React.useState(null);\n  const [logoLoaded, setLogoLoaded] = React.useState(false);\n\n  // Function to get logo dimensions from image\n  const getLogoDimensions = imageSrc => {\n    return new Promise(resolve => {\n      const img = new Image();\n      img.onload = () => {\n        resolve({\n          width: img.naturalWidth,\n          height: img.naturalHeight\n        });\n      };\n      img.onerror = () => {\n        resolve({\n          width: 50,\n          height: 50\n        }); // Fallback to default\n      };\n      img.src = imageSrc;\n    });\n  };\n\n  // Load logo dimensions when logoImage changes\n  React.useEffect(() => {\n    if (design.logoImage) {\n      getLogoDimensions(design.logoImage).then(dims => {\n        setLogoDimensions(dims);\n        setLogoLoaded(true);\n      });\n    } else {\n      setLogoDimensions(null);\n      setLogoLoaded(false);\n    }\n  }, [design.logoImage]);\n\n  // Calculate dynamic logo dimensions\n  const getLogoContainerDimensions = () => {\n    if (!logoLoaded || !logoDimensions) {\n      return {\n        width: 50,\n        height: 50\n      }; // Default square placeholder\n    }\n    const {\n      width,\n      height\n    } = logoDimensions;\n    const aspectRatio = width / height;\n\n    // If logo is wider than 100px, use full width (160px) and calculate height\n    if (width > 100) {\n      return {\n        width: 160,\n        height: Math.min(160 / aspectRatio, 50) // Cap height at 50px\n      };\n    }\n\n    // For smaller logos, maintain aspect ratio but cap at 50x50\n    const maxSize = 50;\n    if (width > height) {\n      return {\n        width: Math.min(width, maxSize),\n        height: Math.min(height, maxSize)\n      };\n    } else {\n      return {\n        width: Math.min(width, maxSize),\n        height: Math.min(height, maxSize)\n      };\n    }\n  };\n\n  // Check if logo text should be hidden\n  const shouldHideLogoText = () => {\n    if (!logoLoaded || !logoDimensions) return false;\n    return logoDimensions.width > 100;\n  };\n\n  // Apple Wallet Store Card specifications (in points)\n  const APPLE_SPECS = {\n    // Store card dimensions (exact Apple specifications)\n    cardWidth: design.cardWidth,\n    // Apple Wallet store card width\n    cardHeight: design.cardHeight,\n    // Apple Wallet store card height\n\n    // Header section\n    headerHeight: design.headerHeight,\n    // Header section height\n    logoWidth: 160,\n    // Logo width (160pt) - Apple specification\n    logoHeight: 50,\n    // Logo height (50pt) - Apple specification\n    logoTextMaxWidth: 160,\n    // Logo text max width (exact Apple spec)\n\n    // Strip section (Primary fields area) - exact Apple specifications\n    stripWidth: design.cardWidth,\n    // Strip width (375pt) - exact Apple spec\n    stripHeight: design.stripHeight,\n    // Strip height (144pt for store card) - exact Apple spec\n\n    // Secondary fields section\n    secondaryHeight: design.secondaryHeight,\n    // Secondary fields section height\n\n    // Barcode section\n    barcodeHeight: design.barcodeHeight,\n    // Barcode section height\n\n    // Spacing (Apple standard)\n    padding: 16,\n    // Standard padding\n    fieldSpacing: 8,\n    // Spacing between fields\n    headerPadding: 20 // Header specific padding\n  };\n  const renderHeaderSection = () => {\n    const logoContainerDims = getLogoContainerDimensions();\n    const hideLogoText = shouldHideLogoText();\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between\",\n      style: {\n        height: `${APPLE_SPECS.headerHeight}px`,\n        padding: `${APPLE_SPECS.headerPadding}px`,\n        backgroundColor: design.backgroundColor\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-shrink-0\",\n        style: {\n          width: `${logoContainerDims.width}px`,\n          height: `${logoContainerDims.height}px`\n        },\n        children: design.logoImage ? /*#__PURE__*/_jsxDEV(\"img\", {\n          src: design.logoImage,\n          alt: \"Logo\",\n          className: \"w-full h-full object-contain bg-white\",\n          style: {\n            maxWidth: `${logoContainerDims.width}px`,\n            maxHeight: `${logoContainerDims.height}px`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"w-full h-full bg-white flex items-center justify-center\",\n          style: {\n            width: `${logoContainerDims.width}px`,\n            height: `${logoContainerDims.height}px`\n          },\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-yellow-400 text-2xl\",\n            children: \"\\u2615\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 139,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 9\n      }, this), !hideLogoText && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 text-center px-4\",\n        style: {\n          maxWidth: `${APPLE_SPECS.logoTextMaxWidth}px`\n        },\n        children: /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"font-bold text-lg leading-tight\",\n          style: {\n            color: design.foregroundColor\n          },\n          children: design.logoText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-shrink-0 text-right\",\n        style: {\n          color: design.foregroundColor\n        },\n        children: (() => {\n          if (!design.expirationDate) return null;\n          try {\n            const d = new Date(design.expirationDate);\n            if (isNaN(d.getTime())) return null;\n            const dd = String(d.getDate()).padStart(2, '0');\n            const mm = String(d.getMonth() + 1).padStart(2, '0');\n            const yy = String(d.getFullYear()).slice(-2);\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs font-medium\",\n                children: `EXP: ${dd}/${mm}/${yy}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 174,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 173,\n              columnNumber: 15\n            }, this);\n          } catch {\n            return null;\n          }\n        })()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 7\n    }, this);\n  };\n  const renderStripSection = () => {\n    // Unified tiered layout and dimensions (same as backend)\n    const layoutCalc = new OptimizedLayoutCalculator();\n    const dimCalc = new OptimizedDimensionCalculator(layoutCalc);\n    const dims = dimCalc.calculateDimensions(design.totalStamps, 1);\n    const rows = dims.rows;\n    const cols = dims.cols;\n    const stampSize = dims.stampDiameter;\n    const gap = dims.adjustedGap;\n    const gridW = cols * stampSize + (cols - 1) * gap;\n    const gridH = rows * stampSize + (rows - 1) * gap;\n    const startX = Math.floor((APPLE_SPECS.stripWidth - gridW) / 2);\n    const safeTop = Math.round(dims.safeAreaPadding);\n    const safeH = Math.round(dims.safeAreaHeight);\n    const startY = safeTop + Math.floor((safeH - gridH) / 2);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative stamp-strip-container\",\n      style: {\n        width: `${APPLE_SPECS.stripWidth}px`,\n        height: `${APPLE_SPECS.stripHeight}px`,\n        backgroundColor: design.stripBackgroundColor\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"relative z-10 h-full\",\n        style: {\n          paddingTop: `${safeTop}px`,\n          paddingBottom: `${APPLE_SPECS.stripHeight - safeTop - safeH}px`\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"grid\",\n          style: {\n            gridTemplateColumns: `repeat(${cols}, ${stampSize}px)`,\n            gridTemplateRows: `repeat(${rows}, ${stampSize}px)`,\n            gap: `${gap}px`,\n            width: `${gridW}px`,\n            height: `${gridH}px`,\n            marginLeft: `${startX}px`,\n            marginRight: `${startX}px`\n          },\n          children: Array.from({\n            length: design.totalStamps\n          }).map((_, i) => {\n            const isEarned = i < design.stampsEarned;\n            const isMilestone = design.milestones.includes(i + 1); // Milestone stamps\n            const iconSrc = (() => {\n              if (isEarned) {\n                return (design.useSameStampIcon ? design.stampIconUnredeemed || null : design.stampIconRedeemed || null) || null;\n              }\n              return design.stampIconUnredeemed || null;\n            })();\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"rounded-full border-2 flex items-center justify-center overflow-hidden\",\n              style: {\n                width: `${stampSize}px`,\n                height: `${stampSize}px`,\n                borderColor: iconSrc ? 'transparent' : isEarned ? design.backgroundColor : isMilestone ? '#FFD700' : `${design.backgroundColor}40`,\n                backgroundColor: iconSrc ? 'transparent' : isEarned ? design.backgroundColor : isMilestone ? 'rgba(255, 215, 0, 0.15)' : `${design.backgroundColor}15`,\n                boxShadow: isEarned ? '0 2px 4px rgba(0, 0, 0, 0.1)' : 'none',\n                borderStyle: isMilestone && !isEarned ? 'dashed' : 'solid'\n              },\n              children: iconSrc ? /*#__PURE__*/_jsxDEV(\"img\", {\n                src: iconSrc,\n                alt: isEarned ? 'redeemed' : 'unredeemed',\n                style: {\n                  width: `${stampSize}px`,\n                  height: `${stampSize}px`,\n                  objectFit: 'contain',\n                  opacity: isEarned ? 1 : 0.4\n                }\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 251,\n                columnNumber: 21\n              }, this) : isEarned ? /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-bold\",\n                style: {\n                  color: design.foregroundColor,\n                  fontSize: `${Math.max(8, stampSize * 0.4)}px`\n                },\n                children: \"\\u2713\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 21\n              }, this) : null\n            }, i, false, {\n              fileName: _jsxFileName,\n              lineNumber: 238,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }, this);\n  };\n  const renderSecondaryFields = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"px-4 py-3\",\n    style: {\n      backgroundColor: design.backgroundColor\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center h-full\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs opacity-75 mb-1\",\n          style: {\n            color: design.labelColor\n          },\n          children: design.secondaryFields[0].label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm font-medium\",\n          style: {\n            color: design.foregroundColor\n          },\n          children: design.secondaryFields[0].value\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 285,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex-1 text-right\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs opacity-75 mb-1\",\n          style: {\n            color: design.labelColor\n          },\n          children: design.secondaryFields[1].label\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 302,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-sm font-medium\",\n          style: {\n            color: design.foregroundColor\n          },\n          children: ((_design$secondaryFiel, _design$secondaryFiel2) => {\n            const label = (((_design$secondaryFiel = design.secondaryFields[1]) === null || _design$secondaryFiel === void 0 ? void 0 : _design$secondaryFiel.label) || '').toLowerCase();\n            const looksLikeRedeemed = label.includes('redeem');\n            if (looksLikeRedeemed) {\n              return `${design.stampsEarned} out of ${design.totalStamps}`;\n            }\n            return (_design$secondaryFiel2 = design.secondaryFields[1]) === null || _design$secondaryFiel2 === void 0 ? void 0 : _design$secondaryFiel2.value;\n          })()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 301,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 283,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 277,\n    columnNumber: 5\n  }, this);\n  const renderBarcodeSection = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-center justify-center mt-auto\",\n    style: {\n      height: `${APPLE_SPECS.barcodeHeight}px`,\n      padding: `${APPLE_SPECS.padding}px`,\n      backgroundColor: design.backgroundColor\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-lg flex items-center justify-center shadow-sm\",\n      style: {\n        width: '80px',\n        height: '60px'\n      },\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-black rounded grid grid-cols-8 gap-0.5\",\n        style: {\n          width: '64px',\n          height: '48px'\n        },\n        children: Array.from({\n          length: 64\n        }, (_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `${i % 2 === 0 ? 'bg-white' : 'bg-black'}`\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 351,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 336,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 328,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative rounded-2xl shadow-2xl overflow-hidden flex flex-col\",\n    style: {\n      width: `${APPLE_SPECS.cardWidth}px`,\n      height: `${APPLE_SPECS.cardHeight}px`,\n      backgroundColor: '#ffffff'\n    },\n    children: [renderHeaderSection(), renderStripSection(), renderSecondaryFields(), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1\",\n      style: {\n        backgroundColor: design.backgroundColor\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 7\n    }, this), renderBarcodeSection()]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 362,\n    columnNumber: 5\n  }, this);\n};\n_s(PassPreview, \"ioJOUiJ9S4sE00ODCN8nivhy7aU=\");\n_c = PassPreview;\nexport default PassPreview;\nvar _c;\n$RefreshReg$(_c, \"PassPreview\");","map":{"version":3,"names":["React","OptimizedLayoutCalculator","OptimizedDimensionCalculator","jsxDEV","_jsxDEV","PassPreview","design","_s","logoDimensions","setLogoDimensions","useState","logoLoaded","setLogoLoaded","getLogoDimensions","imageSrc","Promise","resolve","img","Image","onload","width","naturalWidth","height","naturalHeight","onerror","src","useEffect","logoImage","then","dims","getLogoContainerDimensions","aspectRatio","Math","min","maxSize","shouldHideLogoText","APPLE_SPECS","cardWidth","cardHeight","headerHeight","logoWidth","logoHeight","logoTextMaxWidth","stripWidth","stripHeight","secondaryHeight","barcodeHeight","padding","fieldSpacing","headerPadding","renderHeaderSection","logoContainerDims","hideLogoText","className","style","backgroundColor","children","alt","maxWidth","maxHeight","fileName","_jsxFileName","lineNumber","columnNumber","color","foregroundColor","logoText","expirationDate","d","Date","isNaN","getTime","dd","String","getDate","padStart","mm","getMonth","yy","getFullYear","slice","renderStripSection","layoutCalc","dimCalc","calculateDimensions","totalStamps","rows","cols","stampSize","stampDiameter","gap","adjustedGap","gridW","gridH","startX","floor","safeTop","round","safeAreaPadding","safeH","safeAreaHeight","startY","stripBackgroundColor","paddingTop","paddingBottom","gridTemplateColumns","gridTemplateRows","marginLeft","marginRight","Array","from","length","map","_","i","isEarned","stampsEarned","isMilestone","milestones","includes","iconSrc","useSameStampIcon","stampIconUnredeemed","stampIconRedeemed","borderColor","boxShadow","borderStyle","objectFit","opacity","fontSize","max","renderSecondaryFields","labelColor","secondaryFields","label","value","_design$secondaryFiel","_design$secondaryFiel2","toLowerCase","looksLikeRedeemed","renderBarcodeSection","_c","$RefreshReg$"],"sources":["/Users/shawnlee/Documents/GitHub/passes-mktr/src/frontend/src/components/PassPreview.tsx"],"sourcesContent":["import React from 'react';\nimport { PassDesign } from '../types';\nimport { OptimizedLayoutCalculator } from '../services/layoutCalculator';\nimport { OptimizedDimensionCalculator } from '../services/dimensionCalculator';\n\ninterface PassPreviewProps {\n  design: PassDesign;\n}\n\nconst PassPreview: React.FC<PassPreviewProps> = ({ design }) => {\n  // State to track logo dimensions\n  const [logoDimensions, setLogoDimensions] = React.useState<{width: number, height: number} | null>(null);\n  const [logoLoaded, setLogoLoaded] = React.useState(false);\n\n  // Function to get logo dimensions from image\n  const getLogoDimensions = (imageSrc: string): Promise<{width: number, height: number}> => {\n    return new Promise((resolve) => {\n      const img = new Image();\n      img.onload = () => {\n        resolve({ width: img.naturalWidth, height: img.naturalHeight });\n      };\n      img.onerror = () => {\n        resolve({ width: 50, height: 50 }); // Fallback to default\n      };\n      img.src = imageSrc;\n    });\n  };\n\n  // Load logo dimensions when logoImage changes\n  React.useEffect(() => {\n    if (design.logoImage) {\n      getLogoDimensions(design.logoImage).then(dims => {\n        setLogoDimensions(dims);\n        setLogoLoaded(true);\n      });\n    } else {\n      setLogoDimensions(null);\n      setLogoLoaded(false);\n    }\n  }, [design.logoImage]);\n\n  // Calculate dynamic logo dimensions\n  const getLogoContainerDimensions = () => {\n    if (!logoLoaded || !logoDimensions) {\n      return { width: 50, height: 50 }; // Default square placeholder\n    }\n\n    const { width, height } = logoDimensions;\n    const aspectRatio = width / height;\n    \n    // If logo is wider than 100px, use full width (160px) and calculate height\n    if (width > 100) {\n      return {\n        width: 160,\n        height: Math.min(160 / aspectRatio, 50) // Cap height at 50px\n      };\n    }\n    \n    // For smaller logos, maintain aspect ratio but cap at 50x50\n    const maxSize = 50;\n    if (width > height) {\n      return {\n        width: Math.min(width, maxSize),\n        height: Math.min(height, maxSize)\n      };\n    } else {\n      return {\n        width: Math.min(width, maxSize),\n        height: Math.min(height, maxSize)\n      };\n    }\n  };\n\n  // Check if logo text should be hidden\n  const shouldHideLogoText = () => {\n    if (!logoLoaded || !logoDimensions) return false;\n    return logoDimensions.width > 100;\n  };\n\n  // Apple Wallet Store Card specifications (in points)\n  const APPLE_SPECS = {\n    // Store card dimensions (exact Apple specifications)\n    cardWidth: design.cardWidth, // Apple Wallet store card width\n    cardHeight: design.cardHeight, // Apple Wallet store card height\n    \n    // Header section\n    headerHeight: design.headerHeight, // Header section height\n    logoWidth: 160, // Logo width (160pt) - Apple specification\n    logoHeight: 50, // Logo height (50pt) - Apple specification\n    logoTextMaxWidth: 160, // Logo text max width (exact Apple spec)\n    \n    // Strip section (Primary fields area) - exact Apple specifications\n    stripWidth: design.cardWidth, // Strip width (375pt) - exact Apple spec\n    stripHeight: design.stripHeight, // Strip height (144pt for store card) - exact Apple spec\n    \n    // Secondary fields section\n    secondaryHeight: design.secondaryHeight, // Secondary fields section height\n    \n    \n    // Barcode section\n    barcodeHeight: design.barcodeHeight, // Barcode section height\n    \n    // Spacing (Apple standard)\n    padding: 16, // Standard padding\n    fieldSpacing: 8, // Spacing between fields\n    headerPadding: 20, // Header specific padding\n  };\n\n  const renderHeaderSection = () => {\n    const logoContainerDims = getLogoContainerDimensions();\n    const hideLogoText = shouldHideLogoText();\n    \n    return (\n      <div \n        className=\"flex items-center justify-between\"\n        style={{ \n          height: `${APPLE_SPECS.headerHeight}px`,\n          padding: `${APPLE_SPECS.headerPadding}px`,\n          backgroundColor: design.backgroundColor \n        }}\n      >\n        {/* Logo */}\n        <div \n          className=\"flex-shrink-0\"\n          style={{ width: `${logoContainerDims.width}px`, height: `${logoContainerDims.height}px` }}\n        >\n          {design.logoImage ? (\n            <img \n              src={design.logoImage}\n              alt=\"Logo\"\n              className=\"w-full h-full object-contain bg-white\"\n              style={{ maxWidth: `${logoContainerDims.width}px`, maxHeight: `${logoContainerDims.height}px` }}\n            />\n          ) : (\n            <div \n              className=\"w-full h-full bg-white flex items-center justify-center\"\n              style={{ width: `${logoContainerDims.width}px`, height: `${logoContainerDims.height}px` }}\n            >\n              <span className=\"text-yellow-400 text-2xl\">☕</span>\n            </div>\n          )}\n        </div>\n\n        {/* Logo Text - Only show if logo is not too wide */}\n        {!hideLogoText && (\n          <div \n            className=\"flex-1 text-center px-4\"\n            style={{ maxWidth: `${APPLE_SPECS.logoTextMaxWidth}px` }}\n          >\n            <h1 \n              className=\"font-bold text-lg leading-tight\"\n              style={{ color: design.foregroundColor }}\n            >\n              {design.logoText}\n            </h1>\n          </div>\n        )}\n\n      {/* Header Fields */}\n      <div \n        className=\"flex-shrink-0 text-right\"\n        style={{ color: design.foregroundColor }}\n      >\n        {(() => {\n          if (!design.expirationDate) return null;\n          try {\n            const d = new Date(design.expirationDate);\n            if (isNaN(d.getTime())) return null;\n            const dd = String(d.getDate()).padStart(2, '0');\n            const mm = String(d.getMonth() + 1).padStart(2, '0');\n            const yy = String(d.getFullYear()).slice(-2);\n            return (\n              <div>\n                <div className=\"text-xs font-medium\">\n                  {`EXP: ${dd}/${mm}/${yy}`}\n                </div>\n              </div>\n            );\n          } catch {\n            return null;\n          }\n        })()}\n      </div>\n    </div>\n    );\n  };\n\n  const renderStripSection = () => {\n    // Unified tiered layout and dimensions (same as backend)\n    const layoutCalc = new OptimizedLayoutCalculator();\n    const dimCalc = new OptimizedDimensionCalculator(layoutCalc);\n    const dims = dimCalc.calculateDimensions(design.totalStamps, 1);\n    const rows = dims.rows;\n    const cols = dims.cols;\n    const stampSize = dims.stampDiameter;\n    const gap = dims.adjustedGap;\n    const gridW = (cols * stampSize) + ((cols - 1) * gap);\n    const gridH = (rows * stampSize) + ((rows - 1) * gap);\n    const startX = Math.floor((APPLE_SPECS.stripWidth - gridW) / 2);\n    const safeTop = Math.round(dims.safeAreaPadding);\n    const safeH = Math.round(dims.safeAreaHeight);\n    const startY = safeTop + Math.floor((safeH - gridH) / 2);\n\n    return (\n      <div \n        className=\"relative stamp-strip-container\"\n        style={{ \n          width: `${APPLE_SPECS.stripWidth}px`,\n          height: `${APPLE_SPECS.stripHeight}px`,\n          backgroundColor: design.stripBackgroundColor\n        }}\n      >\n        {/* Primary Fields - Stamps Grid */}\n        <div className=\"relative z-10 h-full\" style={{ paddingTop: `${safeTop}px`, paddingBottom: `${APPLE_SPECS.stripHeight - safeTop - safeH}px` }}>\n          <div \n            className=\"grid\"\n            style={{\n              gridTemplateColumns: `repeat(${cols}, ${stampSize}px)`,\n              gridTemplateRows: `repeat(${rows}, ${stampSize}px)`,\n              gap: `${gap}px`,\n              width: `${gridW}px`,\n              height: `${gridH}px`,\n              marginLeft: `${startX}px`,\n              marginRight: `${startX}px`\n            }}\n          >\n            {Array.from({ length: design.totalStamps }).map((_, i) => {\n              const isEarned = i < design.stampsEarned;\n              const isMilestone = design.milestones.includes(i + 1); // Milestone stamps\n              const iconSrc = (() => {\n                if (isEarned) {\n                  return (design.useSameStampIcon ? (design.stampIconUnredeemed || null) : (design.stampIconRedeemed || null)) || null;\n                }\n                return design.stampIconUnredeemed || null;\n              })();\n              \n              return (\n                <div\n                  key={i}\n                  className=\"rounded-full border-2 flex items-center justify-center overflow-hidden\"\n                  style={{\n                    width: `${stampSize}px`,\n                    height: `${stampSize}px`,\n                    borderColor: iconSrc ? 'transparent' : (isEarned ? design.backgroundColor : isMilestone ? '#FFD700' : `${design.backgroundColor}40`),\n                    backgroundColor: iconSrc ? 'transparent' : (isEarned ? design.backgroundColor : isMilestone ? 'rgba(255, 215, 0, 0.15)' : `${design.backgroundColor}15`),\n                    boxShadow: isEarned ? '0 2px 4px rgba(0, 0, 0, 0.1)' : 'none',\n                    borderStyle: isMilestone && !isEarned ? 'dashed' : 'solid'\n                  }}\n                >\n                  {iconSrc ? (\n                    <img\n                      src={iconSrc}\n                      alt={isEarned ? 'redeemed' : 'unredeemed'}\n                      style={{ width: `${stampSize}px`, height: `${stampSize}px`, objectFit: 'contain', opacity: isEarned ? 1 : 0.4 }}\n                    />\n                  ) : isEarned ? (\n                    <span \n                      className=\"font-bold\" \n                      style={{ \n                        color: design.foregroundColor,\n                        fontSize: `${Math.max(8, stampSize * 0.4)}px`\n                      }}\n                    >\n                      ✓\n                    </span>\n                  ) : null}\n                </div>\n              );\n            })}\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  const renderSecondaryFields = () => (\n    <div \n      className=\"px-4 py-3\"\n      style={{ \n        backgroundColor: design.backgroundColor \n      }}\n    >\n      <div className=\"flex justify-between items-center h-full\">\n        {/* Secondary Field 1 */}\n        <div className=\"flex-1\">\n          <div \n            className=\"text-xs opacity-75 mb-1\"\n            style={{ color: design.labelColor }}\n          >\n            {design.secondaryFields[0].label}\n          </div>\n          <div \n            className=\"text-sm font-medium\"\n            style={{ color: design.foregroundColor }}\n          >\n            {design.secondaryFields[0].value}\n          </div>\n        </div>\n        \n        {/* Secondary Field 2 */}\n        <div className=\"flex-1 text-right\">\n          <div \n            className=\"text-xs opacity-75 mb-1\"\n            style={{ color: design.labelColor }}\n          >\n            {design.secondaryFields[1].label}\n          </div>\n          <div \n            className=\"text-sm font-medium\"\n            style={{ color: design.foregroundColor }}\n          >\n            {(() => {\n              const label = (design.secondaryFields[1]?.label || '').toLowerCase();\n              const looksLikeRedeemed = label.includes('redeem');\n              if (looksLikeRedeemed) {\n                return `${design.stampsEarned} out of ${design.totalStamps}`;\n              }\n              return design.secondaryFields[1]?.value;\n            })()}\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n\n\n  const renderBarcodeSection = () => (\n    <div \n      className=\"flex items-center justify-center mt-auto\"\n      style={{ \n        height: `${APPLE_SPECS.barcodeHeight}px`,\n        padding: `${APPLE_SPECS.padding}px`,\n        backgroundColor: design.backgroundColor \n      }}\n    >\n      <div \n        className=\"bg-white rounded-lg flex items-center justify-center shadow-sm\"\n        style={{ \n          width: '80px', \n          height: '60px'\n        }}\n      >\n        <div \n          className=\"bg-black rounded grid grid-cols-8 gap-0.5\"\n          style={{ \n            width: '64px', \n            height: '48px' \n          }}\n        >\n          {Array.from({ length: 64 }, (_, i) => (\n            <div \n              key={i} \n              className={`${i % 2 === 0 ? 'bg-white' : 'bg-black'}`}\n            />\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n\n  return (\n    <div \n      className=\"relative rounded-2xl shadow-2xl overflow-hidden flex flex-col\"\n      style={{ \n        width: `${APPLE_SPECS.cardWidth}px`,\n        height: `${APPLE_SPECS.cardHeight}px`,\n        backgroundColor: '#ffffff'\n      }}\n    >\n      {/* Header Section */}\n      {renderHeaderSection()}\n      \n      {/* Strip Section (Primary Fields) */}\n      {renderStripSection()}\n      \n      {/* Secondary Fields Section */}\n      {renderSecondaryFields()}\n      \n      {/* Flexible spacer to push barcode to bottom */}\n      <div \n        className=\"flex-1\" \n        style={{ backgroundColor: design.backgroundColor }}\n      ></div>\n\n      {/* Barcode Section */}\n      {renderBarcodeSection()}\n    </div>\n  );\n};\n\nexport default PassPreview;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}